<!DOCTYPE html>
<html>
    <head>
        <title>Homework_calculator</title>
    </head>
    <body>
       <p>B3+
        Написать функцию-калькулятор вручную введённого выражения (без использования функции eval и динамического описания функции new Function, если вы знаете о них).
        Должны работать операции + - * / и скобки, числа должны приниматься целые, дробные (через точку), отрицательные
        Например, вызываем функцию, передавая ей строку "2*(3+1)", функция возвращает 8.
        </p>
        <script type="text/javascript" src="calculator.js"></script>
        <form name="possible_actions">
            <input type="button" value="Ввoд" onclick="readInput()">    
        </form>
        <script>
         function readInput(){
            var str = prompt("Введите выражение, которое хотите вычислить:","");
            // разбиваем строку на массив из операторов и операндов
            var arr = [];
            for (var i = 0, k = -1; i < str.length; i++) {
	            if (str[i] == '+' ||
		            str[i] == '-' ||
        		    str[i] == '*' ||
            		str[i] == '/' ||
	            	str[i] == ')' ||
		            str[i] == '(') {
                        if (k + 1 !== i) 
                            arr.push(str.slice(k + 1, i));
    		            arr.push(str[i]);
	    	            k = i;
                        } else if (i == str.length - 1) 
                    arr.push(str.slice(k + 1, str.length)); // добавляем в массив последний операнд
            }
            var result = calculate(arr); 
            alert("Результат равен: " + result);
           // console.log(result);
        }
        </script>
    </body>
</html>